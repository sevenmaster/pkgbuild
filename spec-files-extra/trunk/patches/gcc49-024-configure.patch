# Stefan Teleman <stefan.teleman@oracle.com>
# The various ./configure's in GCC keep playing with CFLAGS, CXXFLAGS
# or CPPFLAGS, and this unsets LARGEFILE_SOURCE. THe result is that some
# GCC libraries are built with LARGEFILE_SOURCE enabled, and some don't.
# Make sure everything is built with LARGEFILE_SOURCE turned on.
# Internal patch. Not submitted upstream yet.
--- boehm-gc/configure	2014-10-30 04:28:58.000000000 -0400
+++ boehm-gc/configure	2015-08-08 16:24:31.675396837 -0400
@@ -15347,6 +15347,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_headers="$ac_config_headers include/gc_config.h include/gc_ext_config.h"
 
 
--- configure	2014-07-26 11:18:04.000000000 -0400
+++ configure	2015-08-08 16:24:21.800153696 -0400
@@ -14598,6 +14598,34 @@
 
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Enable --enable-checking in stage1 of the compiler.
 # Check whether --enable-stage1-checking was given.
 if test "${enable_stage1_checking+set}" = set; then :
--- fixincludes/configure	2012-05-29 15:28:57.000000000 -0400
+++ fixincludes/configure	2015-08-08 16:24:29.758349637 -0400
@@ -5348,6 +5348,35 @@
   MAINT='#'
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
+
 
 cat >>confdefs.h <<_ACEOF
 #define SED_PROGRAM "${SED}"
--- gcc/configure	2014-10-10 08:51:28.000000000 -0400
+++ gcc/configure	2015-08-08 16:24:32.947428156 -0400
@@ -28098,6 +28098,34 @@
 
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Configure the subdirectories
 # AC_CONFIG_SUBDIRS($subdirs)
 
--- gnattools/configure	2014-01-27 03:18:29.000000000 -0500
+++ gnattools/configure	2015-08-08 16:24:34.988478410 -0400
@@ -2861,6 +2861,34 @@
 fi
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Output: create a Makefile.
 ac_config_files="$ac_config_files Makefile"
 
--- intl/configure	2010-09-27 16:19:41.000000000 -0400
+++ intl/configure	2015-08-08 16:24:30.898377706 -0400
@@ -6576,6 +6576,34 @@
     ;;
 esac
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile config.intl"
 
 cat >confcache <<\_ACEOF
--- libada/configure	2014-10-30 04:28:58.000000000 -0400
+++ libada/configure	2015-08-08 16:24:22.102161132 -0400
@@ -2793,6 +2793,34 @@
 
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Check whether --enable-shared was given.
 if test "${enable_shared+set}" = set; then :
   enableval=$enable_shared;
--- libatomic/configure	2014-10-30 04:28:58.000000000 -0400
+++ libatomic/configure	2015-08-08 16:24:39.607592138 -0400
@@ -15228,6 +15228,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile testsuite/Makefile"
 
 cat >confcache <<\_ACEOF
--- libbacktrace/configure	2014-02-07 16:10:55.000000000 -0500
+++ libbacktrace/configure	2015-08-08 16:24:40.296609102 -0400
@@ -12470,6 +12470,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile backtrace-supported.h"
 
 
--- libcilkrts/configure	2014-03-26 15:16:35.000000000 -0400
+++ libcilkrts/configure	2015-08-08 16:24:38.784571874 -0400
@@ -14502,6 +14502,33 @@
 fi
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
 
 # Must be last
 cat >confcache <<\_ACEOF
--- libcpp/configure	2014-10-30 04:28:58.000000000 -0400
+++ libcpp/configure	2015-08-08 16:24:42.563664920 -0400
@@ -7151,6 +7151,34 @@
 
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 
 case $target in
 	aarch64*-*-* | \
--- libdecnumber/configure	2013-10-15 16:33:55.000000000 -0400
+++ libdecnumber/configure	2015-08-08 16:24:40.696618951 -0400
@@ -4902,6 +4902,34 @@
 
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Output.
 
 ac_config_headers="$ac_config_headers config.h:config.in"
--- libffi/configure	2014-10-30 04:28:58.000000000 -0400
+++ libffi/configure	2015-08-08 16:24:26.128260260 -0400
@@ -12888,6 +12888,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_commands="$ac_config_commands include"
 
 ac_config_commands="$ac_config_commands src"
--- libgcc/configure	2014-02-07 02:46:34.000000000 -0500
+++ libgcc/configure	2015-08-08 16:24:44.183704808 -0400
@@ -4595,6 +4595,35 @@
 
 ac_config_commands="$ac_config_commands default"
 
+
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
--- libgfortran/configure	2014-10-30 04:28:58.000000000 -0400
+++ libgfortran/configure	2015-08-08 16:24:23.425193707 -0400
@@ -26602,6 +26602,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Write our Makefile and spec file.
 ac_config_files="$ac_config_files Makefile libgfortran.spec"
 
--- libgo/configure	2014-05-07 17:47:29.000000000 -0400
+++ libgo/configure	2015-08-08 16:24:34.699471294 -0400
@@ -15390,6 +15390,34 @@
 ac_config_commands="$ac_config_commands default"
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
--- libgomp/configure	2014-10-30 04:28:58.000000000 -0400
+++ libgomp/configure	2015-08-08 16:24:28.590320879 -0400
@@ -16266,6 +16266,34 @@
 
 CFLAGS="$save_CFLAGS"
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files omp.h omp_lib.h omp_lib.f90 libgomp_f.h"
 
 ac_config_files="$ac_config_files Makefile testsuite/Makefile libgomp.spec"
--- libiberty/configure	2014-01-06 13:15:31.000000000 -0500
+++ libiberty/configure	2015-08-08 16:24:25.426242975 -0400
@@ -6955,6 +6955,35 @@
 
 ac_config_commands="$ac_config_commands default"
 
+
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
--- libitm/configure	2014-10-30 04:28:58.000000000 -0400
+++ libitm/configure	2015-08-08 16:24:24.897229950 -0400
@@ -17587,6 +17587,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Set up the set of libraries that we need to link against for libitm.
 # Note that the GTM_SELF_SPECS in gcc.c will force -pthread for -fgnu-tm,
 # which will force linkage against -lpthread (or equivalent for the system).
--- libjava/classpath/configure	2013-09-20 05:47:52.000000000 -0400
+++ libjava/classpath/configure	2015-08-08 16:24:38.071554319 -0400
@@ -25868,6 +25868,34 @@
 
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 if test "x${COMPILE_GJDOC}" = xyes
 then
 ac_config_files="$ac_config_files tools/gjdoc"
--- libjava/configure	2014-10-30 04:28:58.000000000 -0400
+++ libjava/configure	2015-08-08 16:24:36.808523221 -0400
@@ -25116,6 +25116,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files scripts/jar"
 
 cat >confcache <<\_ACEOF
--- libjava/libltdl/configure	2014-10-30 04:28:58.000000000 -0400
+++ libjava/libltdl/configure	2015-08-08 16:24:35.563492567 -0400
@@ -10949,6 +10949,33 @@
 
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
 
 ## -------- ##
 ## Outputs. ##
--- libobjc/configure	2014-10-30 04:28:58.000000000 -0400
+++ libobjc/configure	2015-08-08 16:24:43.206680752 -0400
@@ -11540,6 +11540,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile"
 
 cat >confcache <<\_ACEOF
--- libquadmath/configure	2014-10-30 04:28:58.000000000 -0400
+++ libquadmath/configure	2015-08-08 16:24:30.450366675 -0400
@@ -12883,6 +12883,33 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
 
 # We would like our source tree to be readonly. However when releases or
 # pre-releases are generated, the flex/bison generated files as well as the
@@ -12913,7 +12940,6 @@
 fi
 
 
-
 ac_config_files="$ac_config_files Makefile"
 
 cat >confcache <<\_ACEOF
--- libsanitizer/configure	2014-10-30 04:28:58.000000000 -0400
+++ libsanitizer/configure	2015-08-08 16:24:41.516639141 -0400
@@ -16348,6 +16348,34 @@
 fi
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 
 ac_config_files="$ac_config_files Makefile libsanitizer.spec libbacktrace/backtrace-supported.h"
 
--- libssp/configure	2013-09-20 05:47:52.000000000 -0400
+++ libssp/configure	2015-08-08 16:24:43.830696116 -0400
@@ -11068,6 +11068,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile ssp/ssp.h"
 
 cat >confcache <<\_ACEOF
--- libstdc++-v3/configure	2014-03-20 14:57:07.000000000 -0400
+++ libstdc++-v3/configure	2015-08-08 16:24:49.422833802 -0400
@@ -79405,6 +79405,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Export all the install information.
 
   glibcxx_toolexecdir=no
--- libvtv/configure	2014-10-30 04:28:58.000000000 -0400
+++ libvtv/configure	2015-08-08 16:24:29.355339714 -0400
@@ -12127,7 +12127,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 12099 "configure"
+#line 12130 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -12233,7 +12233,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 12205 "configure"
+#line 12236 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -15502,6 +15502,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 ac_config_files="$ac_config_files Makefile"
 
 
--- lto-plugin/configure	2014-05-15 05:56:22.000000000 -0400
+++ lto-plugin/configure	2015-08-08 16:24:24.062209391 -0400
@@ -4114,6 +4114,34 @@
 fi
 
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 case `pwd` in
   *\ * | *\	*)
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
@@ -10586,7 +10614,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10589 "configure"
+#line 10617 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -10692,7 +10720,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10695 "configure"
+#line 10723 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
--- zlib/configure	2014-10-30 04:28:58.000000000 -0400
+++ zlib/configure	2015-08-08 16:24:33.567443422 -0400
@@ -11205,6 +11205,34 @@
   multilib_arg=
 fi
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
+
 # Check whether --enable-host-shared was given.
 if test "${enable_host_shared+set}" = set; then :
   enableval=$enable_host_shared; PICFLAG=-fPIC
--- zlib/contrib/minizip/configure.ac	2012-11-16 13:35:05.000000000 -0500
+++ zlib/contrib/minizip/configure.ac	2015-08-08 16:21:57.103591082 -0400
@@ -25,6 +25,33 @@
 esac
 AM_CONDITIONAL([WIN32], [test "${WIN32}" = "yes"])
 
+# Solaris must have the macros below passed in CPPFLAGS.
+case "${target}" in
+  i386-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  x86_64-*-solaris2.11)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparc-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+  sparcv9-*-solaris2.12)
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS_FOR_TARGET="$CPPFLAGS_FOR_TARGET -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    CPPFLAGS="$CPPFLAGS -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64"
+    CPPFLAGS="$CPPFLAGS -D_REENTRANT=1 -D__EXTENSIONS__=1"
+    ;;
+esac
 
 AC_SUBST([HAVE_UNISTD_H], [0])
 AC_CHECK_HEADER([unistd.h], [HAVE_UNISTD_H=1], [])
